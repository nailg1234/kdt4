# ==========================================
#      ğŸ  í•¨ìˆ˜ì˜ ë²”ìœ„(Scope) ì´í•´í•˜ê¸°
# ==========================================

'''
ğŸ“Œ ë³€ìˆ˜ì˜ ë²”ìœ„(Scope)ë€?
- ë³€ìˆ˜ê°€ ì‚´ì•„ìˆëŠ”(ì ‘ê·¼ ê°€ëŠ¥í•œ) ì˜ì—­
- ë³€ìˆ˜ê°€ ì–´ë””ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ”ì§€ì˜ ê·œì¹™

ğŸ  ì‰¬ìš´ ë¹„ìœ :
- ì§‘ = ì „ì—­ ë²”ìœ„ (ëª¨ë“  ë°©ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê±°ì‹¤)
- ë°© = ì§€ì—­ ë²”ìœ„ (ê·¸ ë°©ì—ì„œë§Œ ì“¸ ìˆ˜ ìˆëŠ” ê³µê°„)
- ë°© ì•ˆì˜ ë¬¼ê±´ = ì§€ì—­ ë³€ìˆ˜ (ê·¸ ë°©ì—ì„œë§Œ ì‚¬ìš©)
- ê±°ì‹¤ì˜ ë¬¼ê±´ = ì „ì—­ ë³€ìˆ˜ (ëª¨ë“  ë°©ì—ì„œ ì‚¬ìš© ê°€ëŠ¥)
'''

# ==========================================
#      ğŸŒ ì „ì—­ ë³€ìˆ˜ vs ğŸ  ì§€ì—­ ë³€ìˆ˜
# ==========================================

# ì „ì—­ ë³€ìˆ˜ (Global Variable) - í•¨ìˆ˜ ë°–ì—ì„œ ì„ ì–¸
global_var = 'ë‚˜ëŠ” ì „ì—­ ë³€ìˆ˜! ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥'


def my_fun():
    # ì§€ì—­ ë³€ìˆ˜ (Local Variable) - í•¨ìˆ˜ ì•ˆì—ì„œ ì„ ì–¸
    local_var = 'ë‚˜ëŠ” ì§€ì—­ ë³€ìˆ˜! ì´ í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‚¬ìš©'

    print('í•¨ìˆ˜ ì•ˆì—ì„œ:')
    print('  ì „ì—­ ë³€ìˆ˜:', global_var)  # âœ… ì ‘ê·¼ ê°€ëŠ¥
    print('  ì§€ì—­ ë³€ìˆ˜:', local_var)   # âœ… ì ‘ê·¼ ê°€ëŠ¥


my_fun()

print('\ní•¨ìˆ˜ ë°–ì—ì„œ:')
print('  ì „ì—­ ë³€ìˆ˜:', global_var)  # âœ… ì ‘ê·¼ ê°€ëŠ¥
# print('  ì§€ì—­ ë³€ìˆ˜:', local_var)  # âŒ ì—ëŸ¬! í•¨ìˆ˜ ë°–ì—ì„œ ì§€ì—­ ë³€ìˆ˜ ì ‘ê·¼ ë¶ˆê°€

# ==========================================
#      ğŸ”‘ global í‚¤ì›Œë“œ ì‚¬ìš©í•˜ê¸°
# ==========================================
'''
âš ï¸ ì¤‘ìš”: í•¨ìˆ˜ ì•ˆì—ì„œ ì „ì—­ ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ global í‚¤ì›Œë“œê°€ í•„ìš”!
'''

count = 0  # ì „ì—­ ë³€ìˆ˜

# âŒ ì˜ëª»ëœ ë°©ë²• (ì—ëŸ¬ ë°œìƒ)
# def increment_wrong():
#     count += 1  # ì—ëŸ¬! íŒŒì´ì¬ì´ countë¥¼ ì§€ì—­ ë³€ìˆ˜ë¡œ ì°©ê°
#     # UnboundLocalError ë°œìƒ!

# âœ… ì˜¬ë°”ë¥¸ ë°©ë²• (global ì‚¬ìš©)


def increment_right():
    global count  # "ë‚˜ëŠ” ì „ì—­ ë³€ìˆ˜ countë¥¼ ì‚¬ìš©í• ê±°ì•¼!"
    count = count + 1  # ì´ì œ ì „ì—­ ë³€ìˆ˜ ìˆ˜ì • ê°€ëŠ¥


print('ì´ˆê¸°ê°’:', count)  # 0
increment_right()
print('1íšŒ ì¦ê°€:', count)  # 1
increment_right()
print('2íšŒ ì¦ê°€:', count)  # 2

# ğŸ® ì‹¤ì „ ì˜ˆì œ: ê²Œì„ ì ìˆ˜ ê´€ë¦¬
print('\n=== ê²Œì„ ì ìˆ˜ ì‹œìŠ¤í…œ ===')
score = 0  # ì „ì—­ ì ìˆ˜


def add_score(points):
    """ì ìˆ˜ë¥¼ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜"""
    global score  # ì „ì—­ score ì‚¬ìš© ì„ ì–¸
    score += points
    print(f'ğŸ¯ {points}ì  íšë“! í˜„ì¬ ì ìˆ˜: {score}')


def reset_score():
    """ì ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜"""
    global score
    score = 0
    print('ğŸ”„ ì ìˆ˜ ì´ˆê¸°í™”!!')


# ê²Œì„ í”Œë ˆì´
add_score(100)  # 100ì  íšë“
add_score(200)  # 200ì  ì¶”ê°€
print(f'ì´ì : {score}')  # 300

reset_score()  # ë¦¬ì…‹
print(f'ë¦¬ì…‹ í›„: {score}')  # 0

# ==========================================
#      âš ï¸ ì „ì—­ ë³€ìˆ˜ ì‚¬ìš© ì£¼ì˜ì‚¬í•­
# ==========================================
print('\n=== ì „ì—­ ë³€ìˆ˜ ë‚¨ìš© ì˜ˆì‹œ ===')

# ğŸ˜« ë‚˜ìœ ì˜ˆ: ì „ì—­ ë³€ìˆ˜ ë‚¨ìš©
total = 0
count = 0


def add_number(num):
    global total, count  # ì—¬ëŸ¬ ì „ì—­ ë³€ìˆ˜ ë™ì‹œ ì‚¬ìš©
    total += num
    count += 1


def get_average():
    global total, count  # ë˜ ì „ì—­ ë³€ìˆ˜...
    return total / count if count > 0 else 0

# ğŸ˜Š ì¢‹ì€ ì˜ˆ: ë§¤ê°œë³€ìˆ˜ì™€ ë°˜í™˜ê°’ ì‚¬ìš©


def calculate_average(numbers):
    """ì „ì—­ ë³€ìˆ˜ ì—†ì´ ê¹”ë”í•˜ê²Œ í‰ê·  ê³„ì‚°"""
    if not numbers:  # ë¹ˆ ë¦¬ìŠ¤íŠ¸ë©´
        return 0
    return sum(numbers) / len(numbers)


# ì‚¬ìš© ì˜ˆì‹œ
numbers = [53, 56, 34, 64]
avg = calculate_average(numbers)
print(f'í‰ê· : {avg}')

# ==========================================
#      ğŸ“¦ ê°€ë³€ íƒ€ì… vs ë¶ˆë³€ íƒ€ì…
# ==========================================
print('\n=== ê°€ë³€/ë¶ˆë³€ íƒ€ì… ì°¨ì´ ===')

# ğŸ”’ ë¶ˆë³€ íƒ€ì… (Immutable) ì²˜ë¦¬


def increment_num(num_copy):  # ë³µì‚¬ë³¸ì´ ë„˜ì–´ì˜´
    """ë¶ˆë³€ íƒ€ì…ì€ í•¨ìˆ˜ ì•ˆì—ì„œ ë°”ê¿”ë„ ì›ë³¸ ì•ˆ ë°”ë€œ"""
    num_copy += 1
    print(f'  í•¨ìˆ˜ ì•ˆì—ì„œ: {num_copy}')


# ë¶ˆë³€ íƒ€ì…: ì •ìˆ˜, ì‹¤ìˆ˜, ë¬¸ìì—´, íŠœí”Œ
num = 10
print('ğŸ“Œ ë¶ˆë³€ íƒ€ì… (ì •ìˆ˜):')
print(f'  í•¨ìˆ˜ í˜¸ì¶œ ì „: {num}')  # 10
increment_num(num)  # 11 (í•¨ìˆ˜ ì•ˆì—ì„œë§Œ)
print(f'  í•¨ìˆ˜ í˜¸ì¶œ í›„: {num}')  # 10 (ì›ë³¸ ê·¸ëŒ€ë¡œ!)

# ğŸ”“ ê°€ë³€ íƒ€ì… (Mutable) ì²˜ë¦¬


def num_append(numbers):  # ì›ë³¸ì´ ë„˜ì–´ì˜´
    """ê°€ë³€ íƒ€ì…ì€ í•¨ìˆ˜ ì•ˆì—ì„œ ë°”ê¾¸ë©´ ì›ë³¸ë„ ë°”ë€œ!"""
    numbers.append(6)  # ì›ë³¸ì— 6 ì¶”ê°€
    numbers[0] += 1    # ì›ë³¸ì˜ ì²« ë²ˆì§¸ ê°’ ì¦ê°€


# ê°€ë³€ íƒ€ì…: ë¦¬ìŠ¤íŠ¸, ë”•ì…”ë„ˆë¦¬, set
numbers = [1, 2, 3, 4, 5]
print('\nğŸ“Œ ê°€ë³€ íƒ€ì… (ë¦¬ìŠ¤íŠ¸):')
print(f'  í•¨ìˆ˜ í˜¸ì¶œ ì „: {numbers}')  # [1, 2, 3, 4, 5]
num_append(numbers)
print(f'  í•¨ìˆ˜ í˜¸ì¶œ í›„: {numbers}')  # [2, 2, 3, 4, 5, 6] (ì›ë³¸ ë³€ê²½!)

# ë”•ì…”ë„ˆë¦¬ë„ ê°€ë³€ íƒ€ì…
info_dic = {'name': 'ê¹€ì² ìˆ˜', 'age': 20}


def change_info(info):
    """ë”•ì…”ë„ˆë¦¬ ì •ë³´ ë³€ê²½"""
    info['name'] = 'ì´ì˜í¬'  # ì›ë³¸ ìˆ˜ì •
    info['age'] = 25         # ì›ë³¸ ìˆ˜ì •


print('\nğŸ“Œ ê°€ë³€ íƒ€ì… (ë”•ì…”ë„ˆë¦¬):')
print(f'  í•¨ìˆ˜ í˜¸ì¶œ ì „: {info_dic}')  # {'name': 'ê¹€ì² ìˆ˜', 'age': 20}
change_info(info_dic)
print(f'  í•¨ìˆ˜ í˜¸ì¶œ í›„: {info_dic}')  # {'name': 'ì´ì˜í¬', 'age': 25}

# ==========================================
#      ğŸ”„ ì¬ê·€ í•¨ìˆ˜ (Recursive Function)
# ==========================================
print('\n' + '='*50)
print('ğŸ”„ ì¬ê·€ í•¨ìˆ˜ - ìê¸° ìì‹ ì„ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜')
print('='*50)

'''
ğŸ“Œ ì¬ê·€ í•¨ìˆ˜ë€?
- í•¨ìˆ˜ê°€ ìê¸° ìì‹ ì„ ë‹¤ì‹œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜
- ëŸ¬ì‹œì•„ ì¸í˜•ì²˜ëŸ¼ ê°™ì€ íŒ¨í„´ì´ ë°˜ë³µë  ë•Œ ì‚¬ìš©

âš ï¸ ì¬ê·€ í•¨ìˆ˜ í•„ìˆ˜ ìš”ì†Œ:
1. ê¸°ì € ì¡°ê±´(Base Case): ì–¸ì œ ë©ˆì¶œì§€ (ì—†ìœ¼ë©´ ë¬´í•œ ë°˜ë³µ!)
2. ì¬ê·€ í˜¸ì¶œ(Recursive Call): ìê¸° ìì‹  í˜¸ì¶œ
'''

# ì¬ê·€ í•¨ìˆ˜ ê¸°ë³¸ êµ¬ì¡° (ì£¼ì„ ì²˜ë¦¬)
"""
def recursive_function(n):
    # 1. ê¸°ì € ì¡°ê±´ - ì–¸ì œ ë©ˆì¶œì§€
    if n == ì¢…ë£Œ_ì¡°ê±´:
        return ê¸°ì €ê°’
    
    # 2. ì¬ê·€ í˜¸ì¶œ - ìê¸° ìì‹  í˜¸ì¶œ
    return recursive_function(nì„_ì‘ê²Œ_ë§Œë“ _ê°’)
"""

# ğŸ¯ ì˜ˆì œ 1: íŒ©í† ë¦¬ì–¼ ê³„ì‚°
print('\nğŸ“Š íŒ©í† ë¦¬ì–¼ ê³„ì‚° (5! = 5Ã—4Ã—3Ã—2Ã—1)')


def factorial(n):
    """n! ê³„ì‚°í•˜ê¸°"""
    # ê¸°ì € ì¡°ê±´: 1! = 1, 0! = 1
    if n <= 1:
        return 1

    # ì¬ê·€ í˜¸ì¶œ: n! = n Ã— (n-1)!
    return n * factorial(n-1)


result = factorial(5)
print(f'5! = {result}')  # 120

# ì‹¤í–‰ ê³¼ì • ì„¤ëª…
print('\nì‹¤í–‰ ê³¼ì •:')
print('  factorial(5) = 5 Ã— factorial(4)')
print('  = 5 Ã— 4 Ã— factorial(3)')
print('  = 5 Ã— 4 Ã— 3 Ã— factorial(2)')
print('  = 5 Ã— 4 Ã— 3 Ã— 2 Ã— factorial(1)')
print('  = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1')
print('  = 120')

# ğŸ¯ ì˜ˆì œ 2: í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´
print('\nğŸ”¢ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ (0, 1, 1, 2, 3, 5, 8, 13...)')


def fibonacci(n):
    """në²ˆì§¸ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ êµ¬í•˜ê¸°"""
    # ê¸°ì € ì¡°ê±´
    if n <= 1:
        return n

    # ì¬ê·€ í˜¸ì¶œ: F(n) = F(n-1) + F(n-2)
    return fibonacci(n-1) + fibonacci(n-2)


# í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ ì¶œë ¥
print('í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ (0~7ë²ˆì§¸):')
for i in range(8):
    print(f'  F({i}) = {fibonacci(i)}')

# ==========================================
#      âš¡ ëŒë‹¤ í•¨ìˆ˜ (Lambda Function)
# ==========================================
print('\n' + '='*50)
print('âš¡ ëŒë‹¤ í•¨ìˆ˜ - ì´ë¦„ ì—†ëŠ” ê°„ë‹¨í•œ í•¨ìˆ˜')
print('='*50)

'''
ğŸ“Œ ëŒë‹¤ í•¨ìˆ˜ë€?
- ì´ë¦„ì´ ì—†ëŠ” í•œ ì¤„ì§œë¦¬ ê°„ë‹¨í•œ í•¨ìˆ˜
- ê°„ë‹¨í•œ ê³„ì‚°ì„ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©
- lambda ë§¤ê°œë³€ìˆ˜: í‘œí˜„ì‹
'''

# ğŸ”„ ì¼ë°˜ í•¨ìˆ˜ vs ëŒë‹¤ í•¨ìˆ˜ ë¹„êµ
print('\nğŸ“Š ì¼ë°˜ í•¨ìˆ˜ vs ëŒë‹¤ í•¨ìˆ˜')

# ì¼ë°˜ í•¨ìˆ˜


def square(x):
    return x ** 2


# ëŒë‹¤ í•¨ìˆ˜ (ê°™ì€ ê¸°ëŠ¥!)
def square_lambda(x): return x ** 2


print(f'ì¼ë°˜ í•¨ìˆ˜: square(5) = {square(5)}')
print(f'ëŒë‹¤ í•¨ìˆ˜: square_lambda(5) = {square_lambda(5)}')

# ì—¬ëŸ¬ ë§¤ê°œë³€ìˆ˜ ëŒë‹¤


def add(x, y): return x + y


print(f'\në‘ ìˆ˜ ë”í•˜ê¸°: add(5, 3) = {add(5, 3)}')

# ==========================================
#      ğŸ¯ ëŒë‹¤ í•¨ìˆ˜ í™œìš© (map, filter, sorted)
# ==========================================
print('\n=== ëŒë‹¤ í•¨ìˆ˜ ì‹¤ì „ í™œìš© ===')

numbers = [1, 2, 3, 4, 5]

# 1ï¸âƒ£ map(): ëª¨ë“  ìš”ì†Œì— í•¨ìˆ˜ ì ìš©
print('\nğŸ“Œ map() - ëª¨ë“  ìš”ì†Œ ì œê³±í•˜ê¸°')
squared = list(map(lambda x: x ** 2, numbers))
print(f'ì›ë³¸: {numbers}')
print(f'ì œê³±: {squared}')  # [1, 4, 9, 16, 25]

# ì¼ë°˜ í•¨ìˆ˜ë¡œë„ ê°€ëŠ¥


def increment_fun(x):
    return x + 1


incre_numbers = list(map(increment_fun, numbers))
print(f'+1ì”©: {incre_numbers}')  # [2, 3, 4, 5, 6]

# 2ï¸âƒ£ filter(): ì¡°ê±´ì— ë§ëŠ” ìš”ì†Œë§Œ ì„ íƒ
print('\nğŸ“Œ filter() - 3ë³´ë‹¤ í° ìˆ˜ë§Œ ì„ íƒ')
evens = list(filter(lambda x: x > 3, numbers))
print(f'ì›ë³¸: {numbers}')
print(f'3ë³´ë‹¤ í° ìˆ˜: {evens}')  # [4, 5]

# 3ï¸âƒ£ sorted(): ì •ë ¬ ê¸°ì¤€ ì§€ì •
print('\nğŸ“Œ sorted() - í•™ìƒ ì ìˆ˜ ì •ë ¬')

students = [
    {'name': "í™ê¸¸ë™", 'score': 80},
    {'name': "ê¹€ì² ìˆ˜", 'score': 92},
    {'name': "ì´ì˜í¬", 'score': 72}
]

# ì ìˆ˜ìˆœ ì •ë ¬
students_by_score = sorted(students, key=lambda x: x['score'])
print('\nì ìˆ˜ ë‚®ì€ìˆœ:')
for student in students_by_score:
    print(f'  {student["name"]}: {student["score"]}ì ')

# ì´ë¦„ìˆœ ì •ë ¬
students_by_name = sorted(students, key=lambda x: x['name'])
print('\nì´ë¦„ìˆœ:')
for student in students_by_name:
    print(f'  {student["name"]}: {student["score"]}ì ')

# ==========================================
#           ğŸ’¡ í•µì‹¬ ì •ë¦¬
# ==========================================
print('\n' + '='*50)
print('ğŸ’¡ í•¨ìˆ˜ ì‹¬í™” ê°œë… í•µì‹¬ ì •ë¦¬')
print('='*50)
print('''
ğŸ  ë²”ìœ„(Scope)
  - ì „ì—­ ë³€ìˆ˜: ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥
  - ì§€ì—­ ë³€ìˆ˜: í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‚¬ìš©
  - global í‚¤ì›Œë“œ: í•¨ìˆ˜ ì•ˆì—ì„œ ì „ì—­ ë³€ìˆ˜ ìˆ˜ì •

ğŸ“¦ íƒ€ì…ë³„ íŠ¹ì„±
  - ë¶ˆë³€ íƒ€ì…: í•¨ìˆ˜ì—ì„œ ë°”ê¿”ë„ ì›ë³¸ ê·¸ëŒ€ë¡œ
  - ê°€ë³€ íƒ€ì…: í•¨ìˆ˜ì—ì„œ ë°”ê¾¸ë©´ ì›ë³¸ë„ ë³€ê²½

ğŸ”„ ì¬ê·€ í•¨ìˆ˜
  - ìê¸° ìì‹ ì„ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜
  - ë°˜ë“œì‹œ ì¢…ë£Œ ì¡°ê±´ í•„ìš”!
  - ì˜ˆ: íŒ©í† ë¦¬ì–¼, í”¼ë³´ë‚˜ì¹˜

âš¡ ëŒë‹¤ í•¨ìˆ˜
  - ì´ë¦„ ì—†ëŠ” í•œ ì¤„ í•¨ìˆ˜
  - lambda ë§¤ê°œë³€ìˆ˜: í‘œí˜„ì‹
  - map(), filter(), sorted()ì™€ í•¨ê»˜ ìì£¼ ì‚¬ìš©
''')
print('='*50)
