<!DOCTYPE html>
<!--
  ================================================================
  실습 4: 실시간 검색 필터
  ================================================================

  학습 목표:
  - input 이벤트로 실시간 입력 감지하기
  - 문자열 검색 메서드 사용하기 (includes)
  - 여러 요소를 반복 처리하기 (forEach)
  - 조건에 따라 요소 표시/숨기기 (style.display)

  관련 개념:
  - 실시간 검색 구현
  - 문자열 메서드
  - 동적 스타일 변경
  - 배열 메서드 (forEach)
  ================================================================
-->
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>실습: 실시간 검색</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 500px;
        margin: 50px auto;
        padding: 20px;
      }

      h1 {
        color: #333;
        margin-bottom: 20px;
      }

      /* 검색 입력 필드 스타일 */
      #search {
        width: 100%;
        padding: 12px;
        font-size: 16px;
        border: 2px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
        margin-bottom: 20px;
      }

      #search:focus {
        border-color: #3498db;
        outline: none;
      }

      /* 목록 스타일 */
      #itemList {
        list-style: none;
        padding: 0;
      }

      #itemList li {
        padding: 12px;
        background-color: #f8f9fa;
        margin-bottom: 8px;
        border-radius: 4px;
        border-left: 3px solid #3498db;
        transition: all 0.2s;
      }

      #itemList li:hover {
        background-color: #e8f4f8;
        transform: translateX(5px);
      }

      /* 안내 메시지 */
      .info {
        color: #7f8c8d;
        font-size: 14px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <h1>실시간 검색</h1>

    <div class="info">아래 검색창에 과일 이름을 입력해보세요</div>

    <!-- 검색 입력 필드 -->
    <input type="text" id="search" placeholder="검색어를 입력하세요" />

    <!-- 과일 목록 -->
    <ul id="itemList">
      <li>사과</li>
      <li>바나나</li>
      <li>오렌지</li>
      <li>포도</li>
      <li>딸기</li>
    </ul>

    <script>
      // ============================================
      // DOM 요소 선택
      // ============================================
      const searchInput = document.querySelector("#search");
      const listItems = document.querySelectorAll("#itemList li");
      // querySelectorAll: 일치하는 모든 요소를 NodeList로 반환

      // ============================================
      // 실시간 검색 필터 구현
      // ============================================
      // input 이벤트: 입력 필드의 값이 변경될 때마다 발생
      // (keydown과 달리 붙여넣기, 자동완성 등도 감지)

      searchInput.addEventListener("input", (event) => {
        // 입력된 검색어 가져오기 (소문자로 변환하여 대소문자 구분 없이 검색)
        const searchText = event.target.value.toLowerCase();

        // 모든 목록 항목을 순회하며 검사
        listItems.forEach((item) => {
          // 각 항목의 텍스트 내용 가져오기 (소문자 변환)
          const itemText = item.textContent.toLowerCase();

          // ============================================
          // 문자열 포함 여부 확인
          // ============================================
          // includes(): 문자열에 특정 문자열이 포함되어 있는지 확인
          // 반환값: true (포함됨) 또는 false (포함 안됨)
          //
          // 예시:
          //   "사과".includes("사") → true
          //   "사과".includes("배") → false
          //   "사과".includes("") → true (빈 문자열은 항상 포함)

          if (itemText.includes(searchText)) {
            // 검색어가 포함된 경우: 표시
            item.style.display = "block";
          } else {
            // 검색어가 포함되지 않은 경우: 숨김
            item.style.display = "none";
          }
        });

        // 콘솔에 현재 검색어 출력
        console.log("검색어:", searchText);
      });

      // ============================================
      // 동작 원리 설명
      // ============================================
      // 1. 사용자가 검색창에 "사"를 입력
      // 2. input 이벤트 발생 → 핸들러 함수 실행
      // 3. searchText = "사"
      // 4. 모든 li 요소 순회:
      //    - "사과".includes("사") → true → display: block (보임)
      //    - "바나나".includes("사") → false → display: none (숨김)
      //    - "오렌지".includes("사") → false → display: none
      //    - "포도".includes("사") → false → display: none
      //    - "딸기".includes("사") → false → display: none
      // 5. 결과: "사과"만 화면에 표시됨

      // ============================================
      // 개선 제안
      // ============================================
      // 1. 검색 결과 개수 표시하기
      //    - 필터링된 항목 수를 화면에 표시
      //    - 예: "3개의 결과"
      //
      // 2. 검색어 하이라이트 기능
      //    - 일치하는 부분을 강조 표시
      //    - <mark> 태그나 CSS로 구현
      //
      // 3. 정렬 기능 추가
      //    - 가나다순, 최신순 등으로 정렬
      //    - Array.sort() 사용
      //
      // 4. 검색 결과 없을 때 안내 메시지
      //    - "검색 결과가 없습니다" 메시지 표시
      //
      // 예시 코드 (검색 결과 개수):
      // let visibleCount = 0;
      // listItems.forEach((item) => {
      //   if (item.style.display !== "none") {
      //     visibleCount++;
      //   }
      // });
      // console.log(`${visibleCount}개의 결과`);

      // ============================================
      // 추가 학습: 다른 검색 방법
      // ============================================
      //
      // 1. startsWith() - 시작 문자열 확인
      //    "사과".startsWith("사") → true
      //    "사과".startsWith("과") → false
      //
      // 2. endsWith() - 끝 문자열 확인
      //    "사과".endsWith("과") → true
      //    "사과".endsWith("사") → false
      //
      // 3. indexOf() - 위치 찾기
      //    "사과".indexOf("과") → 1 (인덱스)
      //    "사과".indexOf("배") → -1 (없음)
      //
      // 4. 정규표현식 - 복잡한 패턴 검색
      //    /사/.test("사과") → true
    </script>
  </body>
</html>
