<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì•Œë¦¼ ì‹œìŠ¤í…œ</title>
  </head>
  <body>
    <h1>ğŸ”” ì•Œë¦¼ ì‹œìŠ¤í…œ</h1>

    <div>
      <label for="seconds">ì•Œë¦¼ ì‹œê°„:</label>
      <input type="number" id="seconds" min="1" max="3600" value="10" />
      <span>ì´ˆ í›„</span>
    </div>

    <div>
      <label for="message">ë©”ì‹œì§€:</label>
      <input
        type="text"
        id="message"
        placeholder="ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
        value="ì‹œê°„ì´ ë˜ì—ˆìŠµë‹ˆë‹¤!"
      />
    </div>

    <div>
      <button id="setAlarmBtn">â° ì•Œë¦¼ ì„¤ì •</button>
      <button id="cancelBtn" disabled>âŒ ì·¨ì†Œ</button>
    </div>

    <div id="status"></div>
    <div id="countdown"></div>

    <script>
      // ============================================
      // ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬í˜„
      // ============================================
      // ëª©í‘œ: Nì´ˆ í›„ ì•Œë¦¼ì„ ìš¸ë¦¬ê³ , ë‚¨ì€ ì‹œê°„ì„ ì¹´ìš´íŠ¸ë‹¤ìš´í•˜ëŠ” ì‹œìŠ¤í…œ

      // ğŸ“Œ DOM ìš”ì†Œ ì„ íƒ
      const secondsInput = document.querySelector("#seconds");
      const messageInput = document.querySelector("#message");
      const setAlarmBtn = document.querySelector("#setAlarmBtn");
      const cancelBtn = document.querySelector("#cancelBtn");
      const status = document.querySelector("#status");
      const countdown = document.querySelector("#countdown");

      // ğŸ“Œ í•„ìš”í•œ ë³€ìˆ˜ ì„ ì–¸
      let alarmTimeout = null;
      // setTimeoutì˜ IDë¥¼ ì €ì¥
      // Nì´ˆ í›„ ì•Œë¦¼ì„ ìš¸ë¦¬ëŠ” íƒ€ì´ë¨¸
      // clearTimeoutìœ¼ë¡œ ì·¨ì†Œí•  ë•Œ í•„ìš”í•©ë‹ˆë‹¤

      let countdownInterval = null;
      // setIntervalì˜ IDë¥¼ ì €ì¥
      // 1ì´ˆë§ˆë‹¤ ë‚¨ì€ ì‹œê°„ì„ í‘œì‹œí•˜ëŠ” íƒ€ì´ë¨¸
      // clearIntervalë¡œ ì¤‘ì§€í•  ë•Œ í•„ìš”í•©ë‹ˆë‹¤

      let remainingSeconds = 0;
      // ì•Œë¦¼ê¹Œì§€ ë‚¨ì€ ì‹œê°„ (ì´ˆ ë‹¨ìœ„)
      // ì¹´ìš´íŠ¸ë‹¤ìš´ í‘œì‹œì— ì‚¬ìš©ë©ë‹ˆë‹¤

      // ğŸ“Œ ì¹´ìš´íŠ¸ë‹¤ìš´ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
      function updateCountdown() {
        // ë‚¨ì€ ì‹œê°„ 1ì´ˆ ê°ì†Œ
        remainingSeconds--;
        countdown.textContent = `â±ï¸ ${remainingSeconds}ì´ˆ ë‚¨ìŒ`;

        // ì¹´ìš´íŠ¸ë‹¤ìš´ì´ 0ì´ ë˜ë©´ íƒ€ì´ë¨¸ ì¤‘ì§€
        if (remainingSeconds <= 0) {
          clearInterval(countdownInterval);
          // setTimeoutì´ ì•Œë¦¼ì„ ë„ìš°ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ì¤‘ì§€ë§Œ í•©ë‹ˆë‹¤
        }
      }

      // ğŸ“Œ ì•Œë¦¼ ì„¤ì • ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
      setAlarmBtn.addEventListener("click", () => {
        // 1ë‹¨ê³„: ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
        const seconds = parseInt(secondsInput.value);
        // parseInt: ë¬¸ìì—´ì„ ì •ìˆ˜ë¡œ ë³€í™˜
        // ì˜ˆ: "10" -> 10

        const message = messageInput.value;
        // ì…ë ¥ëœ ë©”ì‹œì§€ í…ìŠ¤íŠ¸

        // 2ë‹¨ê³„: ì…ë ¥ê°’ ê²€ì¦
        if (seconds <= 0) {
          alert("1ì´ˆ ì´ìƒ ì…ë ¥í•˜ì„¸ìš”!");
          return; // í•¨ìˆ˜ ì¢…ë£Œ (ë” ì´ìƒ ì§„í–‰í•˜ì§€ ì•ŠìŒ)
        }

        if (!message.trim()) {
          // trim(): ì•ë’¤ ê³µë°± ì œê±°
          // ê³µë°±ë§Œ ìˆê±°ë‚˜ ë¹ˆ ë¬¸ìì—´ì´ë©´ true
          alert("ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”!");
          return;
        }

        // 3ë‹¨ê³„: ì•Œë¦¼ ì„¤ì • - Nì´ˆ í›„ ì‹¤í–‰
        alarmTimeout = setTimeout(() => {
          // ì§€ì •ëœ ì‹œê°„(secondsì´ˆ) í›„ì— ì´ í•¨ìˆ˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤
          alert(message); // ì•Œë¦¼ì°½ í‘œì‹œ

          // ì•Œë¦¼ í›„ ìƒíƒœ ì´ˆê¸°í™”
          status.textContent = "âœ… ì•Œë¦¼ì´ ìš¸ë ¸ìŠµë‹ˆë‹¤!";
          countdown.textContent = "";
          setAlarmBtn.disabled = false; // ì•Œë¦¼ ì„¤ì • ë²„íŠ¼ í™œì„±í™”
          cancelBtn.disabled = true; // ì·¨ì†Œ ë²„íŠ¼ ë¹„í™œì„±í™”
        }, seconds * 1000);
        // secondsë¥¼ ë°€ë¦¬ì´ˆë¡œ ë³€í™˜ (10ì´ˆ = 10 * 1000 = 10000ms)

        // 4ë‹¨ê³„: ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
        remainingSeconds = seconds;
        // ì˜ˆ: 10ì´ˆë¥¼ ì„¤ì •í–ˆìœ¼ë©´ remainingSeconds = 10

        updateCountdown(); // ì¦‰ì‹œ "10ì´ˆ ë‚¨ìŒ" í‘œì‹œ
        // ì´ê±¸ ì•ˆ í•˜ë©´ 1ì´ˆ í›„ì— ì²˜ìŒ í‘œì‹œë¨

        countdownInterval = setInterval(updateCountdown, 1000);
        // 1ì´ˆë§ˆë‹¤ updateCountdown í•¨ìˆ˜ ì‹¤í–‰
        // 10ì´ˆ -> 9ì´ˆ -> 8ì´ˆ -> ... -> 1ì´ˆ -> 0ì´ˆ

        // 5ë‹¨ê³„: UI ì—…ë°ì´íŠ¸
        status.textContent = `ğŸ”” ì•Œë¦¼ì´ ${seconds}ì´ˆ í›„ ìš¸ë¦½ë‹ˆë‹¤`;
        setAlarmBtn.disabled = true; // ì¤‘ë³µ ì„¤ì • ë°©ì§€
        cancelBtn.disabled = false; // ì·¨ì†Œ ë²„íŠ¼ í™œì„±í™”
      });

      // ğŸ“Œ ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
      cancelBtn.addEventListener("click", () => {
        // 1ë‹¨ê³„: ë‘ ê°œì˜ íƒ€ì´ë¨¸ ëª¨ë‘ ì¤‘ì§€
        clearTimeout(alarmTimeout);
        // setTimeout ì·¨ì†Œ -> ì•Œë¦¼ì´ ìš¸ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤

        clearInterval(countdownInterval);
        // setInterval ì·¨ì†Œ -> ì¹´ìš´íŠ¸ë‹¤ìš´ì´ ë©ˆì¶¥ë‹ˆë‹¤

        // 2ë‹¨ê³„: ìƒíƒœ ì´ˆê¸°í™”
        status.textContent = "âŒ ì•Œë¦¼ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤";
        countdown.textContent = ""; // ì¹´ìš´íŠ¸ë‹¤ìš´ í‘œì‹œ ì§€ìš°ê¸°
        setAlarmBtn.disabled = false; // ì•Œë¦¼ ì„¤ì • ë²„íŠ¼ í™œì„±í™”
        cancelBtn.disabled = true; // ì·¨ì†Œ ë²„íŠ¼ ë¹„í™œì„±í™”
      });

      // ğŸ’¡ ë™ì‘ íë¦„ ì˜ˆì‹œ:
      // 1. 10ì´ˆ, "ì¼ì–´ë‚  ì‹œê°„!" ì…ë ¥ í›„ ì•Œë¦¼ ì„¤ì • í´ë¦­
      // 2. ìƒíƒœ ë©”ì‹œì§€: "ì•Œë¦¼ì´ 10ì´ˆ í›„ ìš¸ë¦½ë‹ˆë‹¤"
      // 3. ì¹´ìš´íŠ¸ë‹¤ìš´: 10ì´ˆ ë‚¨ìŒ -> 9ì´ˆ ë‚¨ìŒ -> ... -> 1ì´ˆ ë‚¨ìŒ -> 0ì´ˆ ë‚¨ìŒ
      // 4-A. 10ì´ˆ í›„ alert("ì¼ì–´ë‚  ì‹œê°„!") ì‹¤í–‰
      // 4-B. ë˜ëŠ” ì¤‘ê°„ì— ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ -> ëª¨ë“  íƒ€ì´ë¨¸ ì¤‘ì§€
      //
      // í•µì‹¬ ê°œë…:
      // - setTimeout: í•œ ë²ˆë§Œ ì‹¤í–‰ (ì•Œë¦¼ ë„ìš°ê¸°)
      // - setInterval: ë°˜ë³µ ì‹¤í–‰ (ì¹´ìš´íŠ¸ë‹¤ìš´ í‘œì‹œ)
      // - ë‘ íƒ€ì´ë¨¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ì§€ë§Œ ê°™ì€ ëª©ì ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤
    </script>
  </body>
</html>
